services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8080:8080"   # HTTP API + Frontend + WebSocket Gateway (/ws)
    env_file:
      - .env
    volumes:
      # Persistent database storage
      - ./data:/app/.db
      # Persistent workspace for agent files
      - ./workspace:/app/workspace
      # Persistent journal for agent notes
      - ./journal:/app/journal
      # Soul directory (SOUL.md copied here on startup)
      - ./soul:/app/soul
    restart: unless-stopped
